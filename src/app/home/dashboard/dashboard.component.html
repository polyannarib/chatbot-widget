<link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.7.0/css/all.css'
  integrity='sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ' crossorigin='anonymous'>

<div class="row">
  <div class="row extremidades col l5">
    <div class="card recursos col l3">
      <h6>{{ 'RESOURCES' | translate }}</h6><i class="fa fa-filter"></i>
    </div>
    <div class="col l3">
      <div><i class="material-icons">chevron_left</i><i class="material-icons">chevron_right</i></div>
    </div>
    <div class="col l3"></div>
    <div class="col l3">
      <div><i class="material-icons">zoom_out</i><i class="material-icons">zoom_in</i></div>
    </div>
  </div>
  <div class="row extremidades col l1"></div>
  <div class="row extremidades col l6">
    <div class="card recursos col l3">
      <h6>PROJETOS</h6><i class="fa fa-filter"></i>
    </div>
    <div class="col l3">
      <div><i class="material-icons">chevron_left</i><i class="material-icons">chevron_right</i></div>
    </div>
    <div class="col l3"></div>
    <div class="col l3">
      <div><i class="material-icons">zoom_out</i><i class="material-icons">zoom_in</i></div>
    </div>
  </div>
</div>
<div class="row tables">
  <table class="col s12 m12 l4 centered table1">
    <thead>
      <tr>
        <th class="space days" colspan="2">Java</th>
        <th class="space"></th>
        <th *ngFor="let day of daysOfWeek14">{{ day }}</th>
      </tr>
    </thead>

    <tbody>
      <ng-container *ngFor="let player of players">
        <tr class="card">
          <td class="spacename"></td>
          <td class="name left-align"><b>{{ player.name }}</b></td>
          <th class="space"></th>
          <ng-container *ngFor="let activity of player.activities  let i = index">
            <td [ngStyle]="{'background-color': activity.style}">
              <button (click)="openModalPlayer(activityDetail, player.id, activity.day, activity.month, activity.year)"
                class="transparent-button">{{ activity.day }}</button>
            </td>
          </ng-container>
        </tr>
        <tr>
          <td>{{ player.allocated }}%</td>
          <td>
            <div class="progress hoverable">
              <div class="determinate" [ngStyle]="{'width': player.allocated+'%'}"></div>
            </div>
          </td>
        </tr>
      </ng-container>
    </tbody>
  </table>

  <table class="col s12 m12 l5 centered">
    <thead>
      <tr>
        <th class="space">{{ 'CODE' | translate }}</th>
        <th class="space">{{ 'PROJECTNAME' | translate }}</th>
        <th class="space"></th>
        <th *ngFor="let day of daysOfWeek7">{{ day }}</th>
        <th class="space"></th>
        <th>{{ 'HOURS' | translate }}</th>
        <th>{{ 'DATE' | translate }}</th>
        <th class="space">{{ 'EXP' | translate }}</th>
        <th class="space">{{ 'EFF' | translate }}</th>
        <th class="space"></th>
        <th class="space">{{ 'STATUSREPORT' | translate }}</th>
      </tr>
    </thead>

    <tbody>
      <ng-container *ngFor="let project of projects">
        <tr class="card">
          <td class="name2 padding-zero"><b>{{ project.code }}</b></td>
          <td class="name3 padding-zero">{{ project.name }}</td>
          <th class="space padding-zero"></th>
          <ng-container *ngFor="let activity of project.activities  let i = index">
            <td [ngStyle]="{'background-color': activity.style}">
              <button (click)="openModalProject(projectDetail, project.id, activity.day, activity.month, activity.year)"
                class="transparent-button">{{ activity.day }}</button>
            </td>
          </ng-container>
          <td class="space realprev padding-zero"><b>Real Prev.</b></td>
          <td class="space realprev padding-zero">{{ project.actualEffort }}<br>{{ project.predictEffort }}</td>
          <td class="space realprev padding-zero">{{ project.actualConclusion}} {{ project.predictConclusion }}</td>
          <td class="space padding-zero"><i class="material-icons"
              [ngStyle]="{ 'color': project.expectedStyle }">fiber_manual_record</i>
          </td>
          <td class="space padding-zero"><i class="material-icons"
              [ngStyle]="{ 'color': project.effortStyle }">fiber_manual_record</i></td>
          <td class="space padding-zero" style="display: flex; justify-content: space-around"><i
              class="material-icons">chevron_left</i><i class="material-icons">chevron_right</i></td>
          <td class="space padding-zero"><i class="material-icons">send</i></td>
        </tr>
        <tr>
          <td>{{ project.completed }}%</td>
          <td colspan="2">
            <div class="progress hoverable">
              <div class="determinate" [ngStyle]="{'width': project.completed+'%'}"></div>
            </div>
          </td>
        </tr>
      </ng-container>
    </tbody>
  </table>
</div>

<!-- GrÃ¡ficos -->
<ul class="collapsible graphicsDiv" data-collapsible="accordion">
  <li>
    <div class="collapsible-header active">
      <!-- <i class="far fa-chart-bar"></i> -->
      <p><b>{{'GRAPHICS' | translate}}</b></p>
    </div>
    <div class="collapsible-body ">
      <div class="graphic" *ngFor="let graphic of graphics">
        <h6>{{graphic.title}}</h6>
        <canvas baseChart [data]="graphic.data" [labels]="graphic.labels" [chartType]="graphic.type"
          [colors]="chartColors" [options]="chartOptions" [legend]="false">
        </canvas>
      </div>
    </div>
  </li>
</ul>


<!-- MODAL PLAYER TASK DETAIL-->
<mz-modal #activityDetail [fixedFooter]="true" [fullscreen]="true" [options]="modalOptions">
  <mz-modal-header>
    <h5 class="center-align">{{ dailyActivity.playerName }}</h5>
  </mz-modal-header>
  <mz-modal-content>
    <div class="divider"></div>
    <div class="row">
      <div class="col l12 m12 s12 mt-10">
        <div class="col l3 m3 s3">
          <div class="ml-m-25">
            <div class="col l8 m8 s8 center-align">
              <span class="activity-text title">{{ dailyActivity.dayText }}</span>
              <div class="col l12 m12 s12 center-align">
                <div class="activity-day">
                  <span class="activity-day-text">{{ dailyActivity.day }}/{{ dailyActivity.month }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col l8 m8 s8">
          <span class="activity-text title">{{ 'PROGRESS' | translate}}</span>
          <div class="row mt-15">
            <div class="col l2 m2 s2">
              <span>33%</span>
            </div>
            <div class="col l10 m10 s10">
              <div class="progress hoverable">
                <div class="determinate" [ngStyle]="{'width': dailyActivity.progress+'%'}"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="divider mt-10"></div>
    <div class="row mt-10">
      <div class="col l2 m2 s2">
        <span class="activity-text title ml-25">{{ 'PROJECT' | translate }}</span>
      </div>
      <div class="col l6 m6 s6 left-align">
        <span class="activity-text title ml-15">{{ 'ACTIVITY' | translate }}</span>
      </div>
      <div class="col l2 m2 s2 left-align">
        <span class="activity-text title ml-m-12">{{ 'DUEDATE' | translate }}</span>
      </div>
      <div class="col l1 m1 s1 left-align">
        <span class="activity-text title ml-m-15">{{ 'EFFORT' | translate }}</span>
      </div>
    </div>
    <ng-container *ngFor="let activity of dailyActivity.activities">
      <div class="row">
        <mz-collapsible [mode]="'expandable'" [onClose]="closeFunctionCallback" [onOpen]="openFunctionCallback"
          [popout]="false">
          <mz-collapsible-item [active]="false">
            <mz-collapsible-item-header class="col l12 m12 s12">
              <div class="valign-wrapper">
                <div title="{{activity.project.name}}" class="col l2 m2 s2 left-align">
                  <span class="activity-text">{{ activity.project.code }}</span>
                </div>
                <div class="col l6 m6 s6 left-align">
                  <span class="activity-text">{{ activity.name }}</span>
                </div>
                <div class="col l2 m2 s2 left-align">
                  <span class="activity-text">{{ activity.dueDate }}</span>
                </div>
                <div class="col l1 m1 s1 left-align">
                  <span class="activity-text">{{ activity.effort }}h</span>
                </div>
                <div class="col l1 m1 s1 padding-zero valign-wrapper">
                  <i class="material-icons"
                    [ngClass]="{ 'warning': activity.status == 'W', 'ok': activity.status == 'O', 'delayed': activity.status == 'D'}">fiber_manual_record</i>
                </div>
              </div>
            </mz-collapsible-item-header>
            <mz-collapsible-item-body>
              <div class="row">
                <table>
                  <thead>
                    <tr>
                      <th class="table-info">{{ 'PROJECT' | translate}}</th>
                      <th class="table-info">{{ 'CARD' | translate }}</th>
                      <th class="table-info">{{ 'PREVIEWSTARTDATE' | translate}}</th>
                      <th class="table-info">{{ 'PREVIEWENDDATE' | translate}}</th>
                      <th class="table-info">{{ 'STARTDATE' | translate}}</th>
                      <th class="table-info">{{ 'ENDDATE' | translate}}</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="table-info">{{ activity.project.name }}</td>
                      <td class="table-info">{{ activity.card.skill.name }} - {{ activity.card.name }}</td>
                      <td class="table-info">{{ activity.previewStartDate}}</td>
                      <td class="table-info">{{ activity.previewEndDate }}</td>
                      <td class="table-info">{{ activity.startDate }}</td>
                      <td class="table-info">{{ activity.doneIn }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="row mt-30">
                <div class="col l2 m2 s2">
                  <button [disabled]="true" mz-button>
                    {{ 'SUSPEND' | translate }}
                  </button>
                </div>
                <div class="col l2 m2 s2">
                  <button [disabled]="true" mz-button>
                    {{ 'CANCEL' | translate }}
                  </button>
                </div>
                <div class="col l2 m2 s2">
                  <button mz-button (click)="reallocate()">
                    {{ 'REALLOCATE' | translate }}
                  </button>
                </div>
                <div class="col l2 m2 s2">
                  <button mz-button (click)="designate()">
                    {{ 'DESIGNATE' | translate }}
                  </button>
                </div>
              </div>
            </mz-collapsible-item-body>
          </mz-collapsible-item>
        </mz-collapsible>
      </div>
    </ng-container>
  </mz-modal-content>
  <mz-modal-footer>
    <button mz-button [flat]="true" mz-modal-close>{{ 'CLOSE' | translate }}</button>
  </mz-modal-footer>
</mz-modal>

<!-- MODAL PROJECT TASK-->
<mz-modal #projectDetail [fixedFooter]="true" [fullscreen]="true" [options]="modalOptions">
  <mz-modal-header>
    <h5 class="center-align">{{ projectModel.projectName }}</h5>
  </mz-modal-header>
  <mz-modal-content>
    <div class="divider"></div>
    <div class="row">
      <div class="col l12 m12 s12 mt-10">
        <div class="col l3 m3 s3">
          <div class="ml-m-25">
            <div class="col l8 m8 s8 center-align">
              <span class="activity-text title">{{ projectModel.dayText }}</span>
              <div class="col l12 m12 s12 center-align">
                <div class="activity-day">
                  <span class="activity-day-text">{{ projectModel.day }}/{{ projectModel.month }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col l8 m8 s8">
          <span class="activity-text title">{{ 'PROGRESS' | translate}}</span>
          <div class="row mt-15">
            <div class="col l2 m2 s2">
              <span>33%</span>
            </div>
            <div class="col l10 m10 s10">
              <div class="progress hoverable">
                <div class="determinate" [ngStyle]="{'width': projectModel.progress+'%'}"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="divider mt-10"></div>
    <div class="row mt-10">
      <div class="col l6 m6 s6 left-align">
        <span class="activity-text title ml-25">{{ 'ACTIVITY' | translate }}</span>
      </div>
      <div class="col l2 m2 s2">
        <span class="activity-text title">{{ 'RESOURCE' | translate }}</span>
      </div>
      <div class="col l2 m2 s2 left-align">
        <span class="activity-text title ml-m-12">{{ 'DUEDATE' | translate }}</span>
      </div>
      <div class="col l1 m1 s1 left-align">
        <span class="activity-text title ml-m-15">{{ 'EFFORT' | translate }}</span>
      </div>
    </div>
    <ng-container *ngFor="let activity of projectModel.activities">
      <div class="row">
        <mz-collapsible [mode]="'expandable'" [onClose]="closeFunctionCallback" [onOpen]="openFunctionCallback"
          [popout]="false">
          <mz-collapsible-item [active]="false">
            <mz-collapsible-item-header class="col l12 m12 s12">
              <div class="mt-10">
                <div class="valign-wrapper">
                  <div class="col l6 m6 s6 left-align">
                    <span class="activity-text">{{ activity.name }}</span>
                  </div>
                  <div class="col l2 m2 s2 left-align">
                    <span class="activity-text">{{ activity.player.name }}</span>
                  </div>
                  <div class="col l2 m2 s2 left-align">
                    <span class="activity-text">{{ activity.dueDate }}</span>
                  </div>
                  <div class="col l1 m1 s1 left-align">
                    <span class="activity-text">{{ activity.effort }}h</span>
                  </div>
                  <div class="col l1 m1 s1 padding-zero valign-wrapper">
                    <i class="material-icons"
                      [ngClass]="{ 'warning': activity.status == 'W', 'ok': activity.status == 'O', 'delayed': activity.status == 'D'}">fiber_manual_record</i>
                  </div>
                </div>
              </div>
            </mz-collapsible-item-header>
            <mz-collapsible-item-body>
              <div class="row">
                <table>
                  <thead>
                    <tr>
                      <th class="table-info">{{ 'PLAYER' | translate}}</th>
                      <th class="table-info">{{ 'CARD' | translate }}</th>
                      <th class="table-info">{{ 'PREVIEWSTARTDATE' | translate}}</th>
                      <th class="table-info">{{ 'PREVIEWENDDATE' | translate}}</th>
                      <th class="table-info">{{ 'STARTDATE' | translate}}</th>
                      <th class="table-info">{{ 'ENDDATE' | translate}}</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="table-info">{{ activity.player.name }}</td>
                      <td class="table-info">{{ activity.card.skill.name }} - {{ activity.card.name }}</td>
                      <td class="table-info">{{ activity.previewStartDate}}</td>
                      <td class="table-info">{{ activity.previewEndDate }}</td>
                      <td class="table-info">{{ activity.startDate }}</td>
                      <td class="table-info">{{ activity.doneIn }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="row mt-30">
                <div class="col l2 m2 s2">
                  <button [disabled]="true" mz-button>
                    {{ 'SUSPEND' | translate }}
                  </button>
                </div>
                <div class="col l2 m2 s2">
                  <button [disabled]="true" mz-button>
                    {{ 'CANCEL' | translate }}
                  </button>
                </div>
                <div class="col l2 m2 s2">
                  <button mz-button (click)="reallocate()">
                    {{ 'REALLOCATE' | translate }}
                  </button>
                </div>
                <div class="col l2 m2 s2">
                  <button mz-button (click)="designate()">
                    {{ 'DESIGNATE' | translate }}
                  </button>
                </div>
              </div>
            </mz-collapsible-item-body>
          </mz-collapsible-item>
        </mz-collapsible>
      </div>
    </ng-container>
  </mz-modal-content>
  <mz-modal-footer>
    <button mz-button [flat]="true" mz-modal-close>{{ 'CLOSE' | translate }}</button>
  </mz-modal-footer>
</mz-modal>